<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Review">
  <insert id="insertReview" parameterType="com.charida.app.review.dto.ReviewDto">
  	INSERT INTO CRD_SERV_REVIEW (SERV_ID, REVIEW_DATE, SERV_ROOT, MENU_SCORE, PRICE_SCORE, 
  								SERV_SCORE, RECOMMAND, TITLE, CONTENT, FILE_YN, BLIND_YN)
  	VALUES('ff0000', SYSDATE, #{serv_root}, #{menu_score}, #{price_score}, 
  			#{serv_score}, #{recommand}, #{title}, #{content}, NULL, 'N')
  </insert>
  <select id="getReviews" resultType="com.charida.app.review.dto.ReviewDto">
  	SELECT 
  	SERV_ID, 
  	REVIEW_DATE, 
  	SERV_ROOT, 
  	MENU_SCORE, 
  	PRICE_SCORE, 
  	SERV_SCORE, 
  	RECOMMAND, 
  	TITLE, 
  	CONTENT 
  	FROM CRD_SERV_REVIEW
  </select>
  
  <select id="ownReview" parameterType="String" resultType="com.charida.app.review.dto.ReviewDto">
	SELECT 
	  	A.SERV_ID, 
	  	A.REVIEW_DATE, 
	  	A.SERV_ROOT, 
	  	A.MENU_SCORE, 
	  	A.PRICE_SCORE, 
	  	A.SERV_SCORE, 
	  	A.RECOMMAND, 
	  	A.TITLE, 
	  	A.CONTENT 
	  	FROM CRD_SERV_REVIEW A INNER JOIN CRD_SERV_APP B
	ON A.SERV_ID = B.SERV_ID
	AND B.CUSTOMER_ID = #{id}
  </select>
</mapper>